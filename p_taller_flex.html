<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Shiny fácil con flexdashboard</title>
    <meta charset="utf-8" />
    <meta name="author" content="Fernando Villalba Bergado" />
    <meta name="date" content="2019-11-24" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/plotly-binding/plotly.js"></script>
    <script src="libs/typedarray/typedarray.min.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="animate.min.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Shiny fácil con flexdashboard
## Cómo crear app web dinámicas con R
### Fernando Villalba Bergado
### <i class="fas  fa-rocket fa-spin "></i>
### 2019-11-24

---


layout: true
background-image: url(imag/Logo_enrdados_blanco.png)
background-position: 98% 1% 
background-size: 6%



---

class: inverse

# Hola

.pull-left[

![](imag/cartel_taller.png)

]

.pull-right[

![https://enrdados.netlify.com/](imag/enrdados.png)

- https://enrdados.netlify.com/
- http://www.enRdados.net

]

---

class: animated, fadeInRight

# Índice del taller

- ¿Qué es *flexdashboard*?

- Diseño de paneles <i class="fas  fa-arrow-alt-circle-right "></i> **Práctica**
 
- Iteractividad I  (*htmlWidgets*) <i class="fas  fa-arrow-alt-circle-right "></i> **Práctica**

- Iteractividad II (*htmlWidgets*) <i class="fas  fa-arrow-alt-circle-right "></i> **Práctica** 

- Iteractividad III (*Shiny* ) <i class="fas  fa-arrow-alt-circle-right "></i> **Práctica **

- Diseño avanzado y publicación <i class="fas  fa-arrow-alt-circle-right "></i> **Práctica**


![](imag/firststep.jpg)

---

background-image: url(imag/fondo5.jpg)
background-size: cover

#¿qué es *flexdashboard*?

[flexdashboard](https://rmarkdown.rstudio.com/flexdashboard/) es una extensión de *Rmarkdown* desarrollada por RSTUDIO para facilitar la creación de paneles (*applicaciones web*).


- &lt;https://rmarkdown.rstudio.com/flexdashboard/&gt;

![dashboard-cartoon](flexdashboard-talk-master/dashboard-cartoon.jpg)

Los paneles permiten comunicar grandes cantidaes de informacion visual rápidamente. Son herramientas esenciales en la toma de decisiones empresariales

existen otras librerías para hacer tableros con shiny mas completas como shinydashboard
https://rstudio.github.io/shinydashboard/structure.html

---

# Ejemplos

![tablero de control web](imag/dashboard.jpg)

---
# Panel bolsa

![marketing](imag/bloomberg.jpg)

---

# Ejemplos de tableros

![marketing](imag/tablero2.jpg)

---

# Ejemplo reales de flexdashboard

## Estáticos (lado cliente)

- [informe de ventas](salesreport.html)
- [informe de cementerios nucleares](wastelands.html)

## Dinámicos (lado servidor)

- [Informe de diversidad de razas en USA](https://walkerke.shinyapps.io/neighborhood_diversity/)

- [contaminacion en el mundo PM2.5](air_polution.html)

---

# Por cierto... ¿qué es shiny?

*Shiny* es un complemento para R que permite crear aplicaciones web interactivas. Una aplicación Shiny se compone de:

- *ui* --&gt; una interfaz de usuario  que controla el diseño y la apariencia de la aplicación
- *server* --&gt; una función que contiene las instrucciones para construir los objetos que se muestran en la interfaz de usuario.

Las aplicaciones *Shiny* permiten la **interacción** del usuario mediante una funcionalidad llamada *reactividad*.


&lt;img src="imag/shiny.png" width="600px" height="150px" style="display: block; margin: auto;" /&gt;


---

&lt;iframe src="flexdashboard-talk-master/wastelands.html" width="800" height="600"&gt;
&lt;/iframe&gt;

---

&lt;iframe src="https://walkerke.shinyapps.io/neighborhood_diversity/" width="800" height="600"&gt;
&lt;/iframe&gt;

---


# Crear una app 

 1. Diseño de la plantilla 
 2. Programación y relleno de cajas
 3. Reactividad
 3. Publicar

![cat](imag/ceiling-cat.jpg)

---

# Fichero de partida rmarkdown

.pull-left[ app.Rmd

```YAML
---
title: "Memoria Anual" 
author: "pepito"
date: "2019"
output: 
    flexdashboard::flex_dashboard: 
      orientation: rows
---
    
## Row

### Chart 1
   
## Row

### Chart 2
    
### Chart 3
```
]

.pull-right[

![](imag/formatoflex.png)
]

---

# Encabezado YAML de flexdashboard


```YAML
---
title: "Mi primer tablero"
output:
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    logo: "imag/logoR.png"
    social: menu
    source_code: embed
    theme: united
runtime: shiny
---

```

---
class: animated, fadeInLeft

# Formato 

Cualquier tablero lo crearemos a partir de 3 niveles básicos:

.pull-left[

1. **Páginas** 
```
#        `===`
```
2. **Columnas - filas**
```
##       `---` 
```
3. **Cajas** 
```
### 
```
4. Extras:
   + {.sidebar} 
   + {.tabset} 
   + {data-width=350} 
   + {data-height=}
]

.pull-right[

![cat](imag/nivelesflex.gif)

]

---

class: inverse, center, middle

# PRÁCTICA I

Nuestro primer tablero

1. abrir RSTUDIO -&gt;RMarkdown -&gt; from template -&gt; flexdashboard
2. crear un diseño de dos paginas, 1 pag: graficos, 2 pag tabla datos
3. insertar código en cada caja

&lt;img src="imag/aempezar.gif" width="300px" height="150px" style="display: block; margin: auto;" /&gt;

---

# Complementos

## Value boxes


```r
library(flexdashboard)
articles &lt;- 204
valueBox(articles, 
         icon = "fa-pencil", 
         caption = "Articles per Day")
```


![valuebox](flexdashboard-talk-master/valuebox.png)

Los iconos los puedes buscar aqui:

 - [Font Awesome](https://fortawesome.github.io/Font-Awesome/icons/)
 - [Ionicons](http://ionicons.com/)
 - [Bootstrap Glyphicons](https://getbootstrap.com/components/#glyphicons)


---

# Gauge


```r
satisfaction &lt;- 86
gauge(satisfaction, min = 0, max = 100, symbol = '%', 
  label = "Satisfaction", gaugeSectors(
  success = c(80, 100), warning = c(40, 79), danger = c(0, 39)
))
```

![gauge](imag/gauge.png)

---

class: inverse

# Interactividad con  htmlwidgets

- [https://www.htmlwidgets.org/](https://www.htmlwidgets.org/)
- &lt;http://gallery.htmlwidgets.org/&gt;

.pull-left[
&lt;img src="p_taller_flex_files/figure-html/unnamed-chunk-5-1.png" height="400px" /&gt;
]

.pull-right[
<div id="htmlwidget-f2a2e72ae422f8096236" style="width:504px;height:400px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-f2a2e72ae422f8096236">{"x":{"data":[{"orientation":"v","width":[0.1125,0.1125,0.1125,0.1125,0.112500000000001],"base":[0,0,0,0,0],"x":[0.60625,1.60625,2.60625,3.60625,4.60625],"y":[210,96,84,205,146],"text":["count:  210<br />cut: Fair<br />clarity: I1","count:   96<br />cut: Good<br />clarity: I1","count:   84<br />cut: Very Good<br />clarity: I1","count:  205<br />cut: Premium<br />clarity: I1","count:  146<br />cut: Ideal<br />clarity: I1"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(68,1,84,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"I1","legendgroup":"I1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.1125,0.1125,0.1125,0.1125,0.112500000000001],"base":[0,0,0,0,0],"x":[0.71875,1.71875,2.71875,3.71875,4.71875],"y":[466,1081,2100,2949,2598],"text":["count:  466<br />cut: Fair<br />clarity: SI2","count: 1081<br />cut: Good<br />clarity: SI2","count: 2100<br />cut: Very Good<br />clarity: SI2","count: 2949<br />cut: Premium<br />clarity: SI2","count: 2598<br />cut: Ideal<br />clarity: SI2"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(70,51,126,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"SI2","legendgroup":"SI2","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.1125,0.1125,0.1125,0.1125,0.112500000000001],"base":[0,0,0,0,0],"x":[0.83125,1.83125,2.83125,3.83125,4.83125],"y":[408,1560,3240,3575,4282],"text":["count:  408<br />cut: Fair<br />clarity: SI1","count: 1560<br />cut: Good<br />clarity: SI1","count: 3240<br />cut: Very Good<br />clarity: SI1","count: 3575<br />cut: Premium<br />clarity: SI1","count: 4282<br />cut: Ideal<br />clarity: SI1"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(54,92,141,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"SI1","legendgroup":"SI1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.1125,0.1125,0.1125,0.1125,0.112500000000001],"base":[0,0,0,0,0],"x":[0.94375,1.94375,2.94375,3.94375,4.94375],"y":[261,978,2591,3357,5071],"text":["count:  261<br />cut: Fair<br />clarity: VS2","count:  978<br />cut: Good<br />clarity: VS2","count: 2591<br />cut: Very Good<br />clarity: VS2","count: 3357<br />cut: Premium<br />clarity: VS2","count: 5071<br />cut: Ideal<br />clarity: VS2"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(39,127,142,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"VS2","legendgroup":"VS2","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.1125,0.1125,0.1125,0.112500000000001,0.112500000000001],"base":[0,0,0,0,0],"x":[1.05625,2.05625,3.05625,4.05625,5.05625],"y":[170,648,1775,1989,3589],"text":["count:  170<br />cut: Fair<br />clarity: VS1","count:  648<br />cut: Good<br />clarity: VS1","count: 1775<br />cut: Very Good<br />clarity: VS1","count: 1989<br />cut: Premium<br />clarity: VS1","count: 3589<br />cut: Ideal<br />clarity: VS1"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(31,161,135,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"VS1","legendgroup":"VS1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.1125,0.1125,0.1125,0.112500000000001,0.112500000000001],"base":[0,0,0,0,0],"x":[1.16875,2.16875,3.16875,4.16875,5.16875],"y":[69,286,1235,870,2606],"text":["count:   69<br />cut: Fair<br />clarity: VVS2","count:  286<br />cut: Good<br />clarity: VVS2","count: 1235<br />cut: Very Good<br />clarity: VVS2","count:  870<br />cut: Premium<br />clarity: VVS2","count: 2606<br />cut: Ideal<br />clarity: VVS2"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(74,193,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"VVS2","legendgroup":"VVS2","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.1125,0.1125,0.1125,0.112500000000001,0.112500000000001],"base":[0,0,0,0,0],"x":[1.28125,2.28125,3.28125,4.28125,5.28125],"y":[17,186,789,616,2047],"text":["count:   17<br />cut: Fair<br />clarity: VVS1","count:  186<br />cut: Good<br />clarity: VVS1","count:  789<br />cut: Very Good<br />clarity: VVS1","count:  616<br />cut: Premium<br />clarity: VVS1","count: 2047<br />cut: Ideal<br />clarity: VVS1"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(159,218,58,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"VVS1","legendgroup":"VVS1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.1125,0.1125,0.1125,0.112500000000001,0.112500000000001],"base":[0,0,0,0,0],"x":[1.39375,2.39375,3.39375,4.39375,5.39375],"y":[9,71,268,230,1212],"text":["count:    9<br />cut: Fair<br />clarity: IF","count:   71<br />cut: Good<br />clarity: IF","count:  268<br />cut: Very Good<br />clarity: IF","count:  230<br />cut: Premium<br />clarity: IF","count: 1212<br />cut: Ideal<br />clarity: IF"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(253,231,37,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"IF","legendgroup":"IF","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":23.3059360730594,"r":7.30593607305936,"b":37.2602739726027,"l":48.9497716894977},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["Fair","Good","Very Good","Premium","Ideal"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Fair","Good","Very Good","Premium","Ideal"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"cut","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-253.55,5324.55],"tickmode":"array","ticktext":["0","1000","2000","3000","4000","5000"],"tickvals":[0,1000,2000,3000,4000,5000],"categoryorder":"array","categoryarray":["0","1000","2000","3000","4000","5000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"count","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.938132733408324},"annotations":[{"text":"clarity","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"15d07cf3e1e":{"x":{},"fill":{},"type":"bar"}},"cur_data":"15d07cf3e1e","visdat":{"15d07cf3e1e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
]

---
class: animated, jackInTheBox

# Objetos Shiny

![o](imag/basicwidgets.png)

---
class: inverse,animated, fadeInLeft

# ¿Quíenes intervienen?

.pull-left[

# Mentor

- Facilita el desarrollo del **pupilo**, a través del intercambio de sus propios recursos, conocimientos, valores, habilidades, perspectivas, actitudes y competencias.

- Le ofrece la oportunidad de desarrollar nuevas perspectivas, *hacerse preguntas*, conocer otras inquietudes y ampliar su visión  personal y profesional.


]

.pull-right[
# Pupilo

- El **pupilo** desarrollará habilidades y conocimientos que le ayudarán a alcanzar las metas que *él mismo defina*.

&lt;img src="imag/jodaLuke.jpg" width="500px" height="200px" /&gt;
]

---
class: animated, jackInTheBox

# Recursos

* https://github.com/rstudio-education/shiny-wsds18/blob/master/04-dashboards/04-dashboards.pdf
* http://arm.rbind.io/slides/flexdashboard.html#1

* https://jenthompson.me/resources/
* https://rstudio-education.github.io/shiny-wsds18/
* https://github.com/jmcphers/flexdashboard-talk/blob/master/flexdashboards.Rmd
* https://github.com/rstudio-education/shiny-wsds18/blob/master/02-reactivity/02-reactivity.pdf

* https://github.com/rstudio-education/arm-workshop-rsc2019
* iconos en :https://fontawesome.com/icons?d=gallery&amp;q=gra&amp;m=free
* https://ionicons.com/
* http://www.htmlwidgets.org/

---

background-image: url(imag/fondo6.jpg)
background-size: cover

# diferencias entre Shiny vs Flexdashboard

.pull-left[

## shiny
 
- Codigo especifico UI
- no muy fácil
- dinámico
- Bootstrap

]

.pull-right[

##Flexdashboard

- Rmarkdown
-super facil
- dinámico o estático
- CSS
]

---

# Publicar la app

Después de crear la app con shiny se puede alojar en &lt;ShinyApps.io&gt; es la opción más sencilla. La cuenta gratuita da derecho a 5 app en el servidor.

Otras opciones son RSTUDIO connect, o crearse un servidor Shiny propio en el que publicar, pr ejemplo en mi blog teneis cómo hacerlo en AWS

### webs estáticas o con crosstalk

- mandar html
- RPubs
- Servidor propio

### webs Shiny
- shinyapp.io
- AWS
- RSTUDIOcloud
- Serividor propio


&lt;img src="imag/firststep.jpg" width="600px" height="150px" style="display: block; margin: auto;" /&gt;

---
class: inverse, center, middle,animated, jackInTheBox

# Si tienes talento, no lo uses para llegar más lejos, úsalo para llegar más acompañado

Muchas Gracias!!

<i class="fas  fa-paper-plane "></i>
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create();
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
